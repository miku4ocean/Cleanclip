# CleanClip - 純文字擷取外掛

CleanClip 是一個 Chrome 擴充功能，可以從網頁擷取純文字內容，支援手動編輯和 AI 摘要匯出。

## 功能特色

### ✅ 已完成功能
- 🎯 **智慧內容擷取**: 5層式策略擷取，突破反爬蟲限制
- 🛡️ **反爬蟲繞過**: 自動處理動態載入、付費牆、懶加載內容
- 📝 **手動文字模式**: 支援複製貼上任意文字進行處理
- 🧹 **智慧文字清理**: 3級清理模式，去除網頁干擾和格式問題
- 📊 **文字分析統計**: 字數、段落、語言、閱讀時間等詳細分析
- 💾 **多格式匯出**: TXT、PDF、圖文PDF 三種格式選擇
- 🖼️ **圖文並茂PDF**: 自動從剪貼簿獲取圖片生成專業PDF
- 🤖 **AI 摘要**: 整合 OpenAI GPT API，支援多種模型選擇
- 🔄 **智慧重試**: 擷取失敗時提供一鍵重試功能
- 🔐 **金鑰安全**: 用戶自行設定 API 金鑰，不寫死在程式中
- 💰 **成本控制**: 提供便宜模型選項，顯示費用資訊

### 🔮 未來功能  
- 🖼️ **圖文PDF**: 支援圖片的進階PDF匯出
- 🎨 **自訂樣式**: PDF字體大小、行距自訂
- ⚡ **批次處理**: 多頁面同時處理

## 安裝方式

### 1. 開發者模式安裝
1. 開啟 Chrome 瀏覽器
2. 前往 `chrome://extensions/`
3. 開啟右上角的「開發人員模式」
4. 點擊「載入未封裝項目」
5. 選擇 `cleanclip` 資料夾
6. 安裝完成！

### 2. 使用方式

#### 🤖 自動模式（網頁擷取）
1. 瀏覽任何網頁
2. 點擊工具列上的 CleanClip 圖示  
3. 側邊欄會自動開啟並擷取內容
4. 編輯文字內容（刪除不需要的部分）
5. 選擇匯出格式

#### 📝 手動模式（文字處理）
1. 點擊 CleanClip 圖示開啟側邊欄
2. 點擊「手動模式」按鈕切換
3. 複製貼上任意文字到文字框
4. 選擇清理模式（輕度/標準/深度）
5. 點擊「清理文字」處理內容
6. 選擇匯出格式

#### 🖼️ 圖文PDF製作
1. 複製圖片到剪貼簿
2. 在 CleanClip 中輸入或擷取文字
3. 點擊「圖文PDF」按鈕
4. 自動生成包含圖片的專業PDF

## API 設定

### OpenAI API 金鑰
1. 前往 [OpenAI API Keys](https://platform.openai.com/account/api-keys)
2. 建立新的 API 金鑰
3. 在 CleanClip 側邊欄頂部輸入金鑰

### 模型選擇
- **GPT-3.5 Turbo**: 便宜選項 ($0.001/1K tokens)
- **GPT-4o Mini**: 平衡選項 ($0.00015/1K tokens) - 推薦
- **GPT-4**: 高品質選項 ($0.03/1K tokens)

## 技術架構

```
cleanclip/
├── manifest.json          # Chrome 外掛配置
├── background.js          # 背景腳本
├── sidebar.html          # 側邊欄 HTML
├── sidebar.css           # 樣式表
├── sidebar.js            # React 側邊欄組件
├── content-script.js     # 內容擷取腳本
├── lib/
│   ├── readability.js        # 基礎文字擷取算法
│   ├── smart-extractor.js    # 智慧擷取引擎（5層策略）
│   ├── anti-crawl-bypass.js  # 反爬蟲繞過機制  
│   ├── text-processor.js     # 文字清理和分析引擎
│   └── pdf-export.js         # PDF 匯出功能（含圖文支援）
├── icons/               # 外掛圖示
└── README.md           # 說明文件
```

## 測試清單

### 基本功能測試
- [ ] 外掛安裝成功
- [ ] 點擊圖示開啟側邊欄
- [ ] 內容自動擷取顯示
- [ ] 文字編輯功能正常
- [ ] 全文匯出下載
- [ ] PDF 匯出功能

### API 功能測試
- [ ] API 金鑰設定儲存
- [ ] 模型選擇功能
- [ ] 摘要生成成功
- [ ] PDF 產生成功
- [ ] 錯誤處理正常

### 相容性測試
- [ ] 新聞網站 (如聯合新聞網)
- [ ] 部落格文章 (如 Medium)
- [ ] 技術文件 (如 GitHub)
- [ ] 電商網站商品頁面

## 開發指引

### 本地開發
1. 修改代碼後
2. 前往 `chrome://extensions/`
3. 點擊外掛的「重新載入」按鈕
4. 測試功能是否正常

### 調試方式
- **側邊欄調試**: 右鍵點擊側邊欄 → 檢查
- **背景腳本調試**: 在擴充功能頁面點擊「背景頁面」
- **內容腳本調試**: 在網頁上按 F12，查看 Console

## 版本歷史

### v1.0.0 (目前版本)
- ✅ 基礎架構建立
- ✅ 內容擷取功能
- ✅ 側邊欄 UI
- ✅ 文字編輯和匯出
- ✅ AI 摘要整合
- ✅ API 金鑰設定
- ✅ PDF 匯出功能

## 已知問題

1. **某些動態網站**: 需要等待頁面完全載入
2. **特殊編碼網站**: 可能出現亂碼，需要手動調整
3. **複雜佈局網站**: Readability 算法可能無法完美擷取

## 貢獻指南

歡迎提交 Issue 和 Pull Request！

## 授權條款

MIT License